/*
 * Flip! jQuery Plugin (http://lab.smashup.it/flip/)
 * @author Luca Manno (luca@smashup.it) [http://i.smashup.it]
 *              [Original idea by Nicola Rizzo (thanks!)]
 *
 * @version 0.9.9 [Nov. 2009]
 *
 * @changelog
 * v 0.9.9      ->      Fix transparency over non-colored background. Added dontChangeColor option.
 *                      Added $clone and $this parameters to on.. callback functions.
 *                      Force hexadecimal color values. Made safe for noConflict use.
 *                      Some refactoring. [Henrik Hjelte, Jul. 10, 2009]
 * 						Added revert options, fixes and improvements on color management.
 * 						Released in Nov 2009
 * v 0.5        ->      Added patch to make it work with Opera (thanks to Peter Siewert), Added callbacks [Feb. 1, 2008]
 * v 0.4.1      ->      Fixed a regression in Chrome and Safari caused by getTransparent [Oct. 1, 2008]
 * v 0.4        ->      Fixed some bugs with transparent color. Now Flip! works on non-white backgrounds | Update: jquery.color.js plugin or jqueryUI still needed :( [Sept. 29, 2008]
 * v 0.3        ->      Now is possibile to define the content after the animation.
 *                              (jQuery object or text/html is allowed) [Sept. 25, 2008]
 * v 0.2        ->      Fixed chainability and buggy innertext rendering (xNephilimx thanks!)
 * v 0.1        ->      Starting release [Sept. 11, 2008]
 *
 */
(function(a){function b(a){a.elem.style[a.prop]=parseInt(a.now,10)+a.unit}var c=function(a){throw{name:"jquery.flip.js plugin error",message:a}},d=function(){return!1},e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},f=function(a){return a&&a.indexOf("#")==-1&&a.indexOf("(")==-1?"rgb("+e[a].toString()+")":a};a.extend(a.fx.step,{borderTopWidth:b,borderBottomWidth:b,borderLeftWidth:b,borderRightWidth:b}),a.fn.revertFlip=function(){return this.each(function(){var b=a(this);b.flip(b.data("flipRevertedSettings"))})},a.fn.flip=function(b){return this.each(function(){var c=a(this),e,g,h,i,j,k=d();if(c.data("flipLock"))return!1;var l={direction:function(a){switch(a){case"tb":return"bt";case"bt":return"tb";case"lr":return"rl";case"rl":return"lr";default:return"bt"}}(b.direction),bgColor:f(b.color)||"#999",color:f(b.bgColor)||c.css("background-color"),content:c.html(),speed:b.speed||500,onBefore:b.onBefore||function(){},onEnd:b.onEnd||function(){},onAnimation:b.onAnimation||function(){}};c.data("flipRevertedSettings",l).data("flipLock",1).data("flipSettings",l),e={width:c.width(),height:c.height(),bgColor:f(b.bgColor)||c.css("background-color"),fontSize:c.css("font-size")||"12px",direction:b.direction||"tb",toColor:f(b.color)||"#999",speed:b.speed||500,top:c.offset().top,left:c.offset().left,target:b.content||null,transparent:"transparent",dontChangeColor:b.dontChangeColor||!1,onBefore:b.onBefore||function(){},onEnd:b.onEnd||function(){},onAnimation:b.onAnimation||function(){}},k&&(e.transparent="#123456"),g=c.css("visibility","hidden").clone(!0).data("flipLock",1).appendTo("body").html("").css({visibility:"visible",position:"absolute",left:e.left,top:e.top,margin:0,zIndex:9999,"-webkit-box-shadow":"0px 0px 0px #000","-moz-box-shadow":"0px 0px 0px #000"});var m=function(){return{backgroundColor:e.transparent,fontSize:0,lineHeight:0,borderTopWidth:0,borderLeftWidth:0,borderRightWidth:0,borderBottomWidth:0,borderTopColor:e.transparent,borderBottomColor:e.transparent,borderLeftColor:e.transparent,borderRightColor:e.transparent,background:"none",borderStyle:"solid",height:0,width:0}},n=function(){var a=e.height/100*25,b=m();return b.width=e.width,{start:b,first:{borderTopWidth:0,borderLeftWidth:a,borderRightWidth:a,borderBottomWidth:0,borderTopColor:"#999",borderBottomColor:"#999",top:e.top+e.height/2,left:e.left-a},second:{borderBottomWidth:0,borderTopWidth:0,borderLeftWidth:0,borderRightWidth:0,borderTopColor:e.transparent,borderBottomColor:e.transparent,top:e.top,left:e.left}}},o=function(){var a=e.height/100*25,b=m();return b.height=e.height,{start:b,first:{borderTopWidth:a,borderLeftWidth:0,borderRightWidth:0,borderBottomWidth:a,borderLeftColor:"#999",borderRightColor:"#999",top:e.top-a,left:e.left+e.width/2},second:{borderTopWidth:0,borderLeftWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftColor:e.transparent,borderRightColor:e.transparent,top:e.top,left:e.left}}};i={tb:function(){var a=n();return a.start.borderTopWidth=e.height,a.start.borderTopColor=e.bgColor,a.second.borderBottomWidth=e.height,a.second.borderBottomColor=e.toColor,a},bt:function(){var a=n();return a.start.borderBottomWidth=e.height,a.start.borderBottomColor=e.bgColor,a.second.borderTopWidth=e.height,a.second.borderTopColor=e.toColor,a},lr:function(){var a=o();return a.start.borderLeftWidth=e.width,a.start.borderLeftColor=e.bgColor,a.second.borderRightWidth=e.width,a.second.borderRightColor=e.toColor,a},rl:function(){var a=o();return a.start.borderRightWidth=e.width,a.start.borderRightColor=e.bgColor,a.second.borderLeftWidth=e.width,a.second.borderLeftColor=e.toColor,a}},h=i[e.direction](),k&&(h.start.filter="chroma(color="+e.transparent+")"),j=function(){var a=e.target;return a&&a.jquery?a.html():a},g.queue(function(){e.onBefore(g,c),g.html("").css(h.start),g.dequeue()}),g.animate(h.first,e.speed),g.queue(function(){e.onAnimation(g,c),g.dequeue()}),g.animate(h.second,e.speed),g.queue(function(){e.dontChangeColor||c.css({backgroundColor:e.toColor}),c.css({visibility:"visible"});var a=j();a&&c.html(a),g.remove(),e.onEnd(g,c),c.removeData("flipLock"),g.dequeue()})})}})(jQuery);